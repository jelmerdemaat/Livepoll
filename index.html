<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Index</title>
</head>
<body>

<input type="range" min="0" max="100" value="50" step="5">

<pre class="data">
Users: <span class="users"></span>
Average result: <span class="average"></span>
</pre>

<progress value="50" max="100">50%</progress>

<script src="/socket.io/socket.io.js"></script>
<script>
	let socket = io(),
		d = document,
		range = d.querySelector('[type="range"]'),
		output = d.querySelector('.average'),
		progress = d.querySelector('progress'),
		users = d.querySelector('.users');

	socket.on('connect', () => {
		socket.emit('range change', range.value);
	});

	range.addEventListener('input', e => {
		e.preventDefault();
		socket.emit('range change', range.value);
	});

	socket.on('average change', value => {
		output.innerHTML = value;
		progress.value = value;
		progress.innerHTML = value + '%';
	});

	socket.on('update users', value => {
		users.innerHTML = value;
	});
</script>

</body>
</html>
